{% extends 'base.html' %}
{% block content %}
<h2>Input Nilai - {{ subj.name }} ({{ subj.code }}) - Kelas {{ class_name }}</h2>
<form method="post" action="{{ url_for('grades.save_scores', subject_id=subj.id, class_name=class_name) }}">
<table class="table">
  <thead><tr><th>NIS</th><th>Nama</th><th>Tugas</th><th>UTS</th><th>UAS</th><th>Nilai Akhir</th></tr></thead>
  <tbody>
  {% for s in students %}
    {% set g = grades_by_student.get(s.id) %}
    <tr>
      <td>{{ s.nis }}</td>
      <td>{{ s.name }}</td>
      <td><input type="number" step="0.01" min="0" max="100" name="tugas_{{ s.id }}" value="{{ g.tugas if g else '' }}"></td>
      <td><input type="number" step="0.01" min="0" max="100" name="uts_{{ s.id }}" value="{{ g.uts if g else '' }}"></td>
      <td><input type="number" step="0.01" min="0" max="100" name="uas_{{ s.id }}" value="{{ g.uas if g else '' }}"></td>
      <td>{{ g.final_score if g else '-' }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
  <button type="submit">Simpan Nilai</button>
  <a href="{{ url_for('grades.select_input') }}">Kembali</a>
</form>
{% endblock %}
